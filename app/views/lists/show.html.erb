<div class="container">
  <div class="title-list">
    <h2 class="text-center"><%= @list.name %></h2>
  </div>
    <div>
      <p><strong>Description:</strong>
      <% if @list.description.nil? %>
        No description for this list.
      <% else %>
      <%= @list.description %>
      <% end %></p>
    </div>

  <div class="info-list">
    <p><strong>Number of movies:</strong> <%= @list.movies.count %></p>
  </div>

  <div class="movies">
    <% if @list.movies.empty? %>
      <p>No movies in this list, add one now !</p>
    <% else %>
        <ul>
          <% @list.movies.each do |movie| %>
          <% bookmark = Bookmark.find_by(list: @list, movie: movie) %>
          <div class="col-6 mb-4">
            <div class="bg-white rounded shadow h-100", style="display:table; vertical-align:middle; text-align:middle">
             <%= image_tag movie.poster_url, alt: movie.title, style: 'height:auto;width:300px;margin-top:10px;margin-left:16px;'  %>
              <div class="p-3 rounded-bottom d-flex flex-column">
                <strong><%= movie.title %> <span class="text-muted font-weight-normal">â€¢ <%= movie.rating %> <i class="fas fa-star star-yellow"></i></span></strong>
                <small class="text-muted"><%= movie.overview %></small>
                  <div class="d-flex align-items-end justify-content-between pt-4">
                    <div>
                      <i class="fas fa-quote-left mr-2"></i><small class="flex-grow-1"><%= bookmark.comment %></small><i class="fas fa-quote-right mr-2"></i>
                   </div>
                    <small class="text-right flex-shrink-0"><%= link_to 'delete', bookmark_path(bookmark), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to remove #{movie.title} from your #{@list.name} list"}, class: 'text-danger' %></small>
              </div>
            </div>
          </div>
        </div>
      <% end %>
        </ul>
    <% end %>
  </div>

  <div class="add-movie my-2">
    <%= link_to "Add a movie", new_list_bookmark_path(@list), class: "btn btn-primary" %>
  </div>

  <div>
   <%= link_to "Edit", edit_list_path(@list), class: "btn btn-primary" %>
    <%= link_to "Delete", list_path(@list), data: {turbo_method: :delete, turbo_confirm: "Are you sure ?"}, class: "btn btn-danger" %>
    <%= link_to "Back", lists_path, class:"btn btn-secondary" %>
  </div>
</div>
